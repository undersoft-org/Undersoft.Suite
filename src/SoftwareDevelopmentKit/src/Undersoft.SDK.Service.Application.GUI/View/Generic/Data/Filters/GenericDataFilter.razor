@using System.ComponentModel.DataAnnotations
@using FluentValidation
@using Undersoft.SDK.Proxies
@using Undersoft.SDK.Rubrics
@using Undersoft.SDK
@using Undersoft.SDK.Invoking

@inherits ViewItem

<CascadingValue Value="@Data">
    <CascadingValue Value="@Root">
        <CascadingValue Value="@OnMenuItemChange">
            <GenericFieldMenu @bind-Open="@IsOpen" HorizontalPosition="@Position" HorizontalThreshold="350" VerticalPosition="@VerticalPosition" Style="@Style" Anchor="@AnchorId" Trigger="@Trigger" Anchored="@Anchored" @ref="@Reference">
                <CascadingValue Value="@FilteredType">
                    <CascadingValue Value="@IsOpen">
                        @foreach (ISeriesItem<Filter> filterEntry in FilterEntries.AsItems())
                        {
                            @if (filterEntry.Index == 0)
                            {
                                <GenericDataFilterItem AutoFocus="true" Index="@filterEntry.Index" Filter=@filterEntry.Value Rubric="@Rubric" Parent="@this" />
                            }
                            else
                            {
                                <GenericDataFilterItem Index="@filterEntry.Index" Filter=@filterEntry.Value Rubric="@Rubric" Parent="@this" />
                            }
                        }
                        <GenericDataFilterButtons Rubric="@Rubric" Parent="@this" />
                    </CascadingValue>
                </CascadingValue>
            </GenericFieldMenu>
        </CascadingValue>
    </CascadingValue>
</CascadingValue>


